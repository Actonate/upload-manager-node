upload-manager-node
===================

A universal upload manager which operates based on profiles. This uploader is mainly a server side controller which manages uploading of various types of file. One can manage uploading of various types of files by creating their own custom upload profiles in the **Upload library**. The upload manager is mainly divided into 2 parts. They are as follows :-

1. ****Upload library****: This is a JSON file where in you can add your custom profiles that you want to use for your uploader.Various fields of an *upload profile* are explained below :-
  * **Field name:** It specifies the upload profile, that the uploaded file refers to. Eg. A company logo can have a field name called 'logo' that refers to the 'logo' profile of the upload library.
  * **Size:** It specifies the minimum and maximum size of the file allowed.
  * **File type:** MIME types of the various file types. Eg. image/jpeg,image/png. If the file type is 'image' then following other attributes would also be included viz.
    * *Image dimensions:* Dimensions of image in pixels that is eligible for uploading.
    * *Minimum image height:* Minimum height of image.
    * *Maximum image height:* Maximum height of image.
    * *Minimum image width:* Minimum width of image.
    * *Maximum image width:* Maximum width of image.
  * **Extension:** Extensions that are supported to be uploaded for a particular upload profile. Eg. .jpeg,.png.
  * **Store mode:** This field would specify the mode of storage for the file being uploaded. i.e. the store mode would tell the server *what to do* with the file being uploaded.There are 3 store modes supported by our system viz.
    * *Directory mode:* This mode is for normal file uploading i.e. the file would be uploaded to a specified path. For this mode a *Directory location* field would be provided where the file would be stored on the server.
    * *REST mode:* This mode would send the contents of the file directly to a specified URL. For this mode a *URL-location* field would be provided where the contents of the file would be sent.
    * *Database mode:* This mode would store the file into the database.A *Database config* field would be included to give the configurations of the database to be used.(Note: This feature would be released as a future enhancement)
  * **Delete after transfer:** This is a boolean field. If it is set to true then the file would be deleted from the temp folder after uploading it to the specified location.
  * **Rename:** This field specifies various modes of renaming a file
  * **Overwrite:** This is a boolean field. If set to true, the file with that name(if already exists on the specified path) would be overwritten.
    > With the `Rename` and the `Overwrite` fields the following scenarios are possible :-
      * If `'Rename'` is set to *'original'* and `'Overwrite'` is set to 'true', then the file with that name(if already exists on the specified path) would be overwritten.
      * If `'Rename'` is set to *'original'* and `'Overwrite'` is set to 'false', then the file with that name(if already exists on the specified path) would not be overwritten and a file with a suffix as _1,_2 etc would be stored.
      * If `'Rename'` is set to *'UUID'* and `'Overwrite'` is set to 'false', then the file with that name(if already exists on the specified path) would not be overwritten and a suffix generated by *'node-uuid'*(`sudo npm install node-uuid --save`) would be appended with the file name and then the file would be stored.
      * If `'Rename'` is set to *'Timestamp'* and `'Overwrite'` is set to 'false', then the file with that name(if already exists on the specified path) would not be overwritten and a suffix generated by `(new Date()).getMilliseconds()` would be appended with the file name and then the file would be stored.
  * **Rename_prefix:** This specifies a prefix to be appended with the file name. Eg. A file named 'bird.jpg' would be stored as 'axi-bird.jpg', if the `'*Rename_prefix*'` field is set to 'axi-'.

2. ****Uploader endpoint:**** This is the core file of our uploader. It checks if the file being uploaded meets all the constraints specified in the upload profile(being referred to by the `Field name` field).
  * If it successfully meets all the constraints, then it would perform file operation as per the value in the `Store mode` field.
  * If the file fails to meet some of the constraints, then proper error messages would be sent to the user.
